# ğŸš‡ Transportation - ì§€í•˜ì²  ì •ë³´ ì•±

Flutterë¡œ ê°œë°œëœ êµ­í† êµí†µë¶€ ì§€í•˜ì²  ì •ë³´ APIë¥¼ í™œìš©í•œ ì§€í•˜ì²  ì‹œê°„í‘œ ì¡°íšŒ ì•±ì…ë‹ˆë‹¤.

## âœ¨ ì£¼ìš” ê¸°ëŠ¥

- ğŸ” **ì—­ ê²€ìƒ‰**: ì§€í•˜ì² ì—­ ì´ë¦„ìœ¼ë¡œ ê²€ìƒ‰
- â° **ë‹¤ìŒ ì—´ì°¨ ì •ë³´**: ì‹œê°„í‘œ ê¸°ë°˜ ë‹¤ìŒ ì—´ì°¨ ë„ì°© ì •ë³´
- ğŸ“… **ì‹œê°„í‘œ ì¡°íšŒ**: í‰ì¼/ì£¼ë§/ê³µíœ´ì¼ ì‹œê°„í‘œ í™•ì¸
- ğŸšŒ **ì¶œêµ¬ë³„ ë²„ìŠ¤ë…¸ì„ **: ê° ì¶œêµ¬ë³„ ì—°ê²° ë²„ìŠ¤ë…¸ì„  ì •ë³´
- ğŸ¢ **ì¶œêµ¬ë³„ ì£¼ë³€ì‹œì„¤**: ê° ì¶œêµ¬ë³„ ì£¼ë³€ ì‹œì„¤ ì •ë³´
- ğŸ“ **ì£¼ë³€ ì—­ ì°¾ê¸°**: GPSë¥¼ ì´ìš©í•œ ì£¼ë³€ ì§€í•˜ì² ì—­ ê²€ìƒ‰
- ğŸ—ºï¸ **ë„¤ì´ë²„ ì§€ë„ ì—°ë™**: ì§€í•˜ì² ì—­ ìœ„ì¹˜ í™•ì¸
- â¤ï¸ **ì¦ê²¨ì°¾ê¸°**: ìì£¼ ì´ìš©í•˜ëŠ” ì—­ ì €ì¥

## ğŸ› ï¸ ì‚¬ìš©ëœ ê¸°ìˆ 

- **Framework**: Flutter 3.8.1+
- **ìƒíƒœ ê´€ë¦¬**: Provider 6.1.1
- **HTTP í†µì‹ **: Dio 5.4.0
- **ì§€ë„**: ë„¤ì´ë²„ ì§€ë„ ë„¤ì´í‹°ë¸Œ SDK 1.4.0 (flutter_naver_map)
- **ë¡œì»¬ ì €ì¥ì†Œ**: Hive 2.2.3 (ê³ ì„±ëŠ¥ NoSQL ë°ì´í„°ë² ì´ìŠ¤)
- **ìœ„ì¹˜ ì„œë¹„ìŠ¤**: Geolocator 10.1.0, Permission Handler 11.1.0
- **JSON ì§ë ¬í™”**: json_annotation 4.8.1, json_serializable 6.7.1

## ğŸ“‹ í•„ìš”í•œ API í‚¤

ì´ ì•±ì„ ì‹¤í–‰í•˜ê¸° ìœ„í•´ì„œëŠ” ë‹¤ìŒ API í‚¤ë“¤ì´ í•„ìš”í•©ë‹ˆë‹¤:

### 1. êµ­í† êµí†µë¶€ ì§€í•˜ì² ì •ë³´ API í‚¤
- [ê³µê³µë°ì´í„°í¬í„¸](https://www.data.go.kr/) íšŒì›ê°€ì… í›„ ë°œê¸‰
- ì„œë¹„ìŠ¤ëª…: **ì§€í•˜ì² ì •ë³´ì„œë¹„ìŠ¤**
- ì œê³µê¸°ê´€: **êµ­í† êµí†µë¶€**
- 4ê°€ì§€ ê¸°ëŠ¥ ì œê³µ:
  1. í‚¤ì›Œë“œê¸°ë°˜ ì§€í•˜ì² ì—­ ëª©ë¡ ì¡°íšŒ
  2. ì§€í•˜ì² ì—­ì¶œêµ¬ë³„ ë²„ìŠ¤ë…¸ì„  ëª©ë¡ ì¡°íšŒ
  3. ì§€í•˜ì² ì—­ì¶œêµ¬ë³„ ì£¼ë³€ ì‹œì„¤ ëª©ë¡ ì¡°íšŒ
  4. ì§€í•˜ì² ì—­ë³„ ì‹œê°„í‘œ ëª©ë¡ì¡°íšŒ

### 2. ë„¤ì´ë²„ ì§€ë„ API í‚¤
- [ë„¤ì´ë²„ í´ë¼ìš°ë“œ í”Œë«í¼](https://www.ncloud.com/) íšŒì›ê°€ì… í›„ ë°œê¸‰
- Maps API ì‹ ì²­

## âš™ï¸ ì„¤ì • ë°©ë²•

### 1. í”„ë¡œì íŠ¸ í´ë¡ 
```bash
git clone <repository-url>
cd transportation
```

### 2. ì˜ì¡´ì„± ì„¤ì¹˜
```bash
flutter pub get
```

### 3. ë„¤ì´ë²„ ì§€ë„ ë„¤ì´í‹°ë¸Œ SDK ì„¤ì •
Git LFS ì„¤ì • (iOS í•„ìˆ˜):
```bash
# macOSì—ì„œ Homebrewë¡œ ì„¤ì¹˜
brew install git-lfs
git lfs install

# iOS ì˜ì¡´ì„± ì—…ë°ì´íŠ¸
cd ios
pod update NMapsMap
cd ..
```

### 4. API í‚¤ ì„¤ì •
`lib/constants/api_constants.dart` íŒŒì¼ì—ì„œ ë‹¤ìŒ ë¶€ë¶„ì„ ì‹¤ì œ API í‚¤ë¡œ êµì²´:

```dart
class ApiConstants {
  // êµ­í† êµí†µë¶€ ì§€í•˜ì² ì •ë³´ API
  static const String subwayApiKey = 'YOUR_SUBWAY_API_KEY_HERE'; // ğŸ‘ˆ ì‹¤ì œ API í‚¤ë¡œ êµì²´
  
  // ë„¤ì´ë²„ ì§€ë„ API
  static const String naverMapClientId = 'YOUR_API_KEY_HERE'; // ğŸ‘ˆ ì‹¤ì œ í´ë¼ì´ì–¸íŠ¸ IDë¡œ êµì²´ ì™„ë£Œ
  static const String naverMapClientSecret = 'YOUR_API_KEY_HERE'; // ğŸ‘ˆ ì‹¤ì œ í´ë¼ì´ì–¸íŠ¸ ì‹œí¬ë¦¿ìœ¼ë¡œ êµì²´ ì™„ë£Œ
}
```

### 5. Hive ì–´ëŒ‘í„° ìƒì„±
```bash
# ë°©ë²• 1: ì œê³µëœ ìŠ¤í¬ë¦½íŠ¸ ì‚¬ìš©
chmod +x generate_hive_adapters.sh
./generate_hive_adapters.sh

# ë°©ë²• 2: ì§ì ‘ ëª…ë ¹ì–´ ì‹¤í–‰
flutter packages pub run build_runner build --delete-conflicting-outputs
```

### 6. JSON ì§ë ¬í™” ì½”ë“œ ìƒì„±
```bash
flutter packages pub run build_runner build --delete-conflicting-outputs
```

### 7. ì•± ì‹¤í–‰
```bash
flutter run
```

**ìƒˆë¡œìš´ ë„¤ì´í‹°ë¸Œ ë„¤ì´ë²„ ì§€ë„ ê¸°ëŠ¥ì„ ì‚¬ìš©í•˜ë ¤ë©´ `NAVER_NATIVE_MAP_GUIDE.md`ë¥¼ ì°¸ê³ í•˜ì„¸ìš”!**

## ğŸ“ í”„ë¡œì íŠ¸ êµ¬ì¡°

```
lib/
â”œâ”€â”€ constants/          # ìƒìˆ˜ íŒŒì¼ë“¤
â”‚   â”œâ”€â”€ api_constants.dart
â”‚   â””â”€â”€ app_constants.dart
â”œâ”€â”€ models/             # ë°ì´í„° ëª¨ë¸ë“¤
â”‚   â”œâ”€â”€ hive/           # Hive ì „ìš© ëª¨ë¸ë“¤
â”‚   â”‚   â”œâ”€â”€ station_group_hive.dart
â”‚   â”‚   â””â”€â”€ seoul_subway_station_hive.dart
â”‚   â”œâ”€â”€ subway_station.dart
â”‚   â”œâ”€â”€ subway_schedule.dart
â”‚   â”œâ”€â”€ next_train_info.dart
â”‚   â”œâ”€â”€ station_group.dart
â”‚   â””â”€â”€ api_response.dart
â”œâ”€â”€ services/           # API ë° ë¡œì»¬ ì €ì¥ì†Œ ì„œë¹„ìŠ¤ë“¤
â”‚   â”œâ”€â”€ http_service.dart
â”‚   â”œâ”€â”€ subway_api_service.dart
â”‚   â”œâ”€â”€ location_service.dart
â”‚   â”œâ”€â”€ favorites_storage_service.dart       # ì¦ê²¨ì°¾ê¸° ì €ì¥ì†Œ (Hive ê¸°ë°˜)
â”‚   â”œâ”€â”€ hive_favorites_storage_service.dart  # Hive ì¦ê²¨ì°¾ê¸° ì„œë¹„ìŠ¤
â”‚   â””â”€â”€ hive_subway_service.dart             # Hive ì§€í•˜ì²  ì •ë³´ ì„œë¹„ìŠ¤
â”œâ”€â”€ providers/          # ìƒíƒœ ê´€ë¦¬ (Provider)
â”‚   â”œâ”€â”€ subway_provider.dart
â”‚   â”œâ”€â”€ location_provider.dart
â”‚   â””â”€â”€ seoul_subway_provider.dart     # ì„œìš¸ ì§€í•˜ì²  ì „ìš© Provider
â”œâ”€â”€ screens/            # í™”ë©´ë“¤
â”‚   â”œâ”€â”€ home_screen.dart
â”‚   â”œâ”€â”€ station_search_screen.dart
â”‚   â”œâ”€â”€ multi_line_station_detail_screen.dart  # ë‹¤ì¤‘ í˜¸ì„  ì§€ì› ì—­ ìƒì„¸í™”ë©´
â”‚   â”œâ”€â”€ nearby_stations_screen.dart
â”‚   â”œâ”€â”€ naver_native_map_screen.dart  # ë„¤ì´ë²„ ë„¤ì´í‹°ë¸Œ ì§€ë„
â”‚   â”œâ”€â”€ google_map_screen.dart        # OpenStreetMap (ëŒ€ì²´ìš©)
â”‚   â”œâ”€â”€ favorites_screen.dart
â”‚   â”œâ”€â”€ favorites_debug_screen.dart   # ì¦ê²¨ì°¾ê¸° ë””ë²„ê¹… í™”ë©´
â”‚   â””â”€â”€ seoul_subway_test_screen.dart # ì„œìš¸ ì§€í•˜ì²  í…ŒìŠ¤íŠ¸ í™”ë©´
â”œâ”€â”€ widgets/            # ì¬ì‚¬ìš© ê°€ëŠ¥í•œ ìœ„ì ¯ë“¤
â”‚   â”œâ”€â”€ station_card.dart
â”‚   â”œâ”€â”€ next_train_card.dart
â”‚   â”œâ”€â”€ schedule_card.dart
â”‚   â””â”€â”€ exit_info_card.dart
â”œâ”€â”€ utils/              # ìœ í‹¸ë¦¬í‹° í•¨ìˆ˜ë“¤
â”‚   â””â”€â”€ app_utils.dart
â””â”€â”€ main.dart           # ì•± ì—”íŠ¸ë¦¬ í¬ì¸íŠ¸
```

## ğŸ†• ìµœê·¼ ì—…ë°ì´íŠ¸ (v2.0)

### SharedPreferences â†’ Hive ë§ˆì´ê·¸ë ˆì´ì…˜
- **ì„±ëŠ¥ í–¥ìƒ**: ë” ë¹ ë¥¸ ì½ê¸°/ì“°ê¸° ì„±ëŠ¥
- **íƒ€ì… ì•ˆì „ì„±**: ì»´íŒŒì¼ íƒ€ì„ ì˜¤ë¥˜ ê²€ì¶œ
- **ë©”ëª¨ë¦¬ íš¨ìœ¨ì„±**: í•„ìš”í•œ ë°ì´í„°ë§Œ ë©”ëª¨ë¦¬ì— ë¡œë“œ
- **í™•ì¥ì„±**: ë³µì¡í•œ ê°ì²´ ì €ì¥ ê°€ëŠ¥

ìì„¸í•œ ë‚´ìš©ì€ `HIVE_MIGRATION_GUIDE.md`ë¥¼ ì°¸ê³ í•˜ì„¸ìš”.

## ğŸ”§ ê°œë°œ í™˜ê²½ ì„¤ì •

### Flutter ë²„ì „
```bash
Flutter 3.8.1+ ê¶Œì¥
```

### ì£¼ìš” ì˜ì¡´ì„±
```yaml
dependencies:
  dio: ^5.4.0                    # HTTP í´ë¼ì´ì–¸íŠ¸
  flutter_naver_map: ^1.4.0      # ë„¤ì´ë²„ ì§€ë„ ë„¤ì´í‹°ë¸Œ SDK (ì—…ë°ì´íŠ¸ë¨)
  webview_flutter: ^4.4.2       # ì›¹ë·° (ëŒ€ì²´ ì§€ë„ ì„œë¹„ìŠ¤ìš©)
  geolocator: ^10.1.0           # ìœ„ì¹˜ ì„œë¹„ìŠ¤
  permission_handler: ^11.1.0    # ê¶Œí•œ ê´€ë¦¬
  provider: ^6.1.1              # ìƒíƒœ ê´€ë¦¬
  json_annotation: ^4.8.1       # JSON ì§ë ¬í™”
  hive: ^2.2.3                  # ê³ ì„±ëŠ¥ ë¡œì»¬ ë°ì´í„°ë² ì´ìŠ¤
  hive_flutter: ^1.1.0          # Flutterìš© Hive í™•ì¥
  url_launcher: ^6.2.2          # URL ëŸ°ì²˜
  flutter_spinkit: ^5.2.0       # ë¡œë”© ì¸ë””ì¼€ì´í„°

dev_dependencies:
  build_runner: ^2.4.7          # ì½”ë“œ ìƒì„±
  json_serializable: ^6.7.1     # JSON ì§ë ¬í™” ì½”ë“œ ìƒì„±
  hive_generator: ^2.0.1        # Hive TypeAdapter ìƒì„±
```

## ğŸ“± ì§€ì› í”Œë«í¼

- âœ… Android
- âœ… iOS
- âœ… Web (ë„¤ì´ë²„ ì§€ë„ ì œí•œì  ì§€ì›)

## ğŸš¨ ì£¼ì˜ì‚¬í•­

1. **API í‚¤ ë³´ì•ˆ**: 
   - âš ï¸ **ì¤‘ìš”**: í˜„ì¬ ì†ŒìŠ¤ì½”ë“œì— API í‚¤ê°€ í•˜ë“œì½”ë”©ë˜ì–´ ìˆìŠµë‹ˆë‹¤
   - ì‹¤ì œ ë°°í¬ ì‹œì—ëŠ” í™˜ê²½ ë³€ìˆ˜ë‚˜ ë³„ë„ ì„¤ì • íŒŒì¼ë¡œ ë¶„ë¦¬ í•„ìš”
   - `.env` íŒŒì¼ ì‚¬ìš© ë° `.gitignore`ì— ì¶”ê°€ ê¶Œì¥
2. **ìœ„ì¹˜ ê¶Œí•œ**: Android/iOSì—ì„œ ìœ„ì¹˜ ê¶Œí•œì´ í•„ìš”í•©ë‹ˆë‹¤.
3. **ì¸í„°ë„· ì—°ê²°**: ëª¨ë“  ê¸°ëŠ¥ì€ ì¸í„°ë„· ì—°ê²°ì´ í•„ìš”í•©ë‹ˆë‹¤.
4. **API ì œí•œ**: ê³µê³µë°ì´í„° APIëŠ” ì¼ì¼ í˜¸ì¶œ ì œí•œì´ ìˆì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤.
5. **ì‹¤ì‹œê°„ ì •ë³´**: ì´ APIëŠ” ì‹¤ì‹œê°„ ë„ì°©ì •ë³´ê°€ ì•„ë‹Œ ì‹œê°„í‘œ ê¸°ë°˜ ì •ë³´ë¥¼ ì œê³µí•©ë‹ˆë‹¤.

## ğŸ”’ ê¶Œí•œ ì„¤ì •

### Android (android/app/src/main/AndroidManifest.xml)
```xml
<uses-permission android:name="android.permission.INTERNET" />
<uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" />
<uses-permission android:name="android.permission.ACCESS_FINE_LOCATION" />
<uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION" />
```

### iOS (ios/Runner/Info.plist)
```xml
<key>NSLocationWhenInUseUsageDescription</key>
<string>ì£¼ë³€ ì§€í•˜ì² ì—­ì„ ì°¾ê¸° ìœ„í•´ ìœ„ì¹˜ ê¶Œí•œì´ í•„ìš”í•©ë‹ˆë‹¤.</string>
```

## ğŸ“Š API ì‘ë‹µ ì˜ˆì‹œ

### 1. ì§€í•˜ì² ì—­ ê²€ìƒ‰ ì‘ë‹µ
```json
{
  "response": {
    "header": {
      "resultCode": "00",
      "resultMsg": "NORMAL SERVICE."
    },
    "body": {
      "items": [
        {
          "subwayStationId": "MTRS11133",
          "subwayStationName": "ì„œìš¸ì—­",
          "subwayRouteName": "ì„œìš¸ 1í˜¸ì„ "
        }
      ],
      "totalCount": 1
    }
  }
}
```

### 2. ì‹œê°„í‘œ ì¡°íšŒ ì‘ë‹µ
```json
{
  "response": {
    "header": {
      "resultCode": "00",
      "resultMsg": "NORMAL SERVICE."
    },
    "body": {
      "items": [
        {
          "subwayRouteId": "MTRS11",
          "subwayStationId": "MTRS11133",
          "subwayStationNm": "ì„œìš¸ì—­",
          "dailyTypeCode": "01",
          "upDownTypeCode": "D",
          "depTime": "051930",
          "arrTime": "052000",
          "endSubwayStationId": "MTRKR1P177",
          "endSubwayStationNm": "ì‹ ì°½(ìˆœì²œí–¥ëŒ€)"
        }
      ],
      "totalCount": 257
    }
  }
}
```

## ğŸ› ë¬¸ì œ í•´ê²°

### ë¹Œë“œ ì˜¤ë¥˜ ì‹œ
1. Flutter clean í›„ ë‹¤ì‹œ ë¹Œë“œ
```bash
flutter clean
flutter pub get
flutter packages pub run build_runner build --delete-conflicting-outputs
```

2. í”Œë«í¼ë³„ ì˜ì¡´ì„± ì—…ë°ì´íŠ¸
```bash
cd android && ./gradlew clean && cd ..
cd ios && pod install && cd ..  # iOSë§Œ
```

### API ì—°ê²° ë¬¸ì œ
1. **API í‚¤ ë³´ì•ˆ ì´ìŠˆ**:
   - `lib/constants/api_constants.dart`ì—ì„œ API í‚¤ê°€ ì˜¬ë°”ë¥¸ì§€ í™•ì¸
   - âš ï¸ ì†ŒìŠ¤ì½”ë“œì— ë…¸ì¶œëœ API í‚¤ë¥¼ í™˜ê²½ë³€ìˆ˜ë¡œ ë¶„ë¦¬ ê¶Œì¥
2. ë„¤íŠ¸ì›Œí¬ ì—°ê²° ìƒíƒœ í™•ì¸
3. ê³µê³µë°ì´í„° API ì„œë¹„ìŠ¤ ìƒíƒœ í™•ì¸
4. API í˜¸ì¶œ íšŸìˆ˜ ì œí•œ í™•ì¸

### ë°ì´í„° ì—†ìŒ ë¬¸ì œ
- êµ­í† êµí†µë¶€ APIëŠ” í‚¤ì›Œë“œ ê¸°ë°˜ ê²€ìƒ‰ì´ë¯€ë¡œ ì •í™•í•œ ì—­ëª… ì…ë ¥ì´ í•„ìš”í•©ë‹ˆë‹¤.
- ì¼ë¶€ ì—­ì˜ ê²½ìš° ë°ì´í„°ê°€ ì—†ì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤.

### ë³´ì•ˆ ê°œì„  ë°©ë²•
1. **API í‚¤ ë¶„ë¦¬**:
```bash
# .env íŒŒì¼ ìƒì„±
echo "SUBWAY_API_KEY=your_api_key_here" > .env
echo "NAVER_MAP_CLIENT_ID=your_client_id" >> .env
echo "NAVER_MAP_CLIENT_SECRET=your_client_secret" >> .env

# .gitignoreì— .env ì¶”ê°€
echo ".env" >> .gitignore
```

## ğŸ”„ API ë¹„êµ: ì„œìš¸ì‹œ vs êµ­í† êµí†µë¶€

| ê¸°ëŠ¥ | ì„œìš¸ì‹œ API | êµ­í† êµí†µë¶€ API |
|------|------------|-----------------|
| ì‹¤ì‹œê°„ ë„ì°©ì •ë³´ | âœ… ì œê³µ | âŒ ë¯¸ì œê³µ |
| ì‹œê°„í‘œ ì •ë³´ | âœ… ì œê³µ | âœ… ì œê³µ |
| ì¶œêµ¬ë³„ ë²„ìŠ¤ë…¸ì„  | âŒ ë¯¸ì œê³µ | âœ… ì œê³µ |
| ì¶œêµ¬ë³„ ì£¼ë³€ì‹œì„¤ | âŒ ë¯¸ì œê³µ | âœ… ì œê³µ |
| ì ìš© ë²”ìœ„ | ì„œìš¸ì‹œë§Œ | ì „êµ­ |
| ê²€ìƒ‰ ë°©ì‹ | ì—­ëª… ì§ì ‘ ì…ë ¥ | í‚¤ì›Œë“œ ê¸°ë°˜ |

## ğŸ“ ë¬¸ì˜ ë° ê¸°ì—¬

í”„ë¡œì íŠ¸ì— ëŒ€í•œ ë¬¸ì˜ì‚¬í•­ì´ë‚˜ ë²„ê·¸ ë¦¬í¬íŠ¸ëŠ” ì´ìŠˆë¡œ ë“±ë¡í•´ì£¼ì„¸ìš”.

---

**ê°œë°œ ê¸°ê°„**: 2024ë…„ 12ì›”  
**ê°œë°œì**: Transportation Team  
**API ì œê³µ**: êµ­í† êµí†µë¶€ (ê³µê³µë°ì´í„°í¬í„¸)  
**ë¼ì´ì„ ìŠ¤**: MIT License
